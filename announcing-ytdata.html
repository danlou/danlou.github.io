<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>Dan Lou</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="http://danlou.github.io/theme/css/poole.css" />
		<link rel="stylesheet" href="http://danlou.github.io/theme/css/hyde.css" />
		<link rel="stylesheet" href="http://danlou.github.io/theme/css/syntax.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'abc', 'auto');
			ga('send', 'pageview');
	</script>
	</head>

	<body class="theme-base-0d">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="http://danlou.github.io/images/profile_pic.jpg">
					Dan Lou
				</a>
			</h1>
			<p class="lead"></p>
			<p class="lead">Just sharing my experiments in ML, NLP, IR and whatever else interests me. </p>
			<p></p>
		</div>
		<nav class="sidebar-nav">
					<a class="sidebar-nav-item" href="mailto:daniel.b.loureiro@gmail.com">
						<i class="fa fa-envelope"></i>
					</a>
					<a class="sidebar-nav-item" href="http://github.com/danlou">
						<i class="fa fa-github"></i>
					</a>
					<a class="sidebar-nav-item" href="http://twitter.com/danielbloureiro">
						<i class="fa fa-twitter"></i>
					</a>
					<a class="sidebar-nav-item" href="http://www.linkedin.com/in/danielloureiro/">
						<i class="fa fa-linkedin"></i>
					</a>
		</nav>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">ytdata - video details from YouTube channels</h1>
	<span class="post-date">Wed 22 March 2017</span>
	<p>After working with the YouTube API on a couple of projects I've found that it could use a wrapper that simplifies the process of obtaining details for all the videos of a given channel.</p>
<p>As it is, sometimes developers must perform different requests depending on the fields they want. This is perhaps a design choice that makes sense when you're building an API to perform the range of operations that the YouTube API allows for, but it can be a pain if you just want to get some data and move along.</p>
<p>You might expect there was an endpoint to query all the videos for a given channel, and let you specify which fields you want for the videos, but unfortunately there isn't (afaik). That's where ytdata can help. You can use it in Python or as a standalone CLI tool. Check it out on <a href="https://github.com/danlou/ytdata">Github</a>.</p>
<h3>Python Example</h3>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ytdata</span> <span class="kn">import</span> <span class="n">YTData</span>

<span class="n">cnn_data</span> <span class="o">=</span> <span class="n">YTData</span><span class="p">(</span><span class="n">channel_id</span><span class="o">=</span><span class="s1">&#39;UCupvZG-5ko_eiXAupbDfxWw&#39;</span><span class="p">,</span>
                  <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;videoId&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;viewCount&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">,</span> <span class="s1">&#39;publishedAt&#39;</span><span class="p">],</span>
                  <span class="n">max_results</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
                  <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">cnn_data</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>

<span class="c1"># peek, nothing&#39;s nested</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Most recent videos:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cnn_data</span><span class="o">.</span><span class="n">items</span><span class="p">[:</span><span class="mi">10</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%d</span><span class="s1">. </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]))</span>

<span class="c1"># store</span>
<span class="n">cnn_data</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="s1">&#39;cnn.json&#39;</span><span class="p">)</span>
</pre></div>


<h3>Setup and CLI Demonstration</h3>
<p><a href=""><iframe width="560" height="315" src="https://www.youtube.com/embed/RAT3J-tBb10" frameborder="0" allowfullscreen></iframe></a></p>
<h3>Installation notes</h3>
<p>ytdata is available as a pip package and can be installed with:</p>
<div class="highlight"><pre><span></span>$ pip install ytdata
</pre></div>


<p>It expects a valid Google API Key stored in an environment variable called GOOGLE_API_KEY.
If you don't already have one, you can follow these <a href="https://developers.google.com/youtube/registering_an_application#Create_API_Keys">instructions</a> (you'll want a server key).</p>
<p>After you get your key, you can add the environment variable by opening your ~/.bashrc (or ~/.zshrc, if you're on zsh) on your editor of choice and append the following line:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">GOOGLE_API_KEY</span><span class="o">=</span><span class="s2">&quot;&lt;Your_Private_Key&gt;&quot;</span>
</pre></div>


<h3>How to find the channel id ?</h3>
<p>The simplest way to find the channel id is to visit the YouTube page for a video belonging to the channel of interest and extract the id from the page's meta tags. Just open the console on your browser and enter:</p>
<div class="highlight"><pre><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;meta[itemprop=&quot;channelId&quot;]&#39;</span><span class="p">)[</span><span class="s1">&#39;content&#39;</span><span class="p">]);</span>
</pre></div>


<h3>Supported Fields</h3>
<p>You can check the supported fields at <a href="">https://github.com/danlou/ytdata#supported-fields</a></p>
<h3>Questions ?</h3>
<p>Reach me on <a href="https://twitter.com/danielbloureiro">Twitter</a> or create an <a href="https://github.com/danlou/ytdata/issues">issue</a> on GH.</p>
</div>
		</div>
	</body>
</html>