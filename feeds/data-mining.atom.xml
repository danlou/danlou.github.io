<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Dan Lou - Data Mining</title><link href="http://danlou.github.io/" rel="alternate"></link><link href="http://danlou.github.io/feeds/data-mining.atom.xml" rel="self"></link><id>http://danlou.github.io/</id><updated>2017-03-22T22:00:00+00:00</updated><entry><title>ytdata - video details from YouTube channels</title><link href="http://danlou.github.io/announcing-ytdata.html" rel="alternate"></link><published>2017-03-22T22:00:00+00:00</published><updated>2017-03-22T22:00:00+00:00</updated><author><name>Dan Lou</name></author><id>tag:danlou.github.io,2017-03-22:/announcing-ytdata.html</id><summary type="html">&lt;p&gt;A minimalistic Python package and CLI tool for obtaining YouTube data.&lt;/p&gt;</summary><content type="html">&lt;p&gt;After working with the YouTube API on a couple of projects I've found that it could use a wrapper that simplifies the process of obtaining details for all the videos of a given channel.&lt;/p&gt;
&lt;p&gt;As it is, sometimes developers must perform different requests depending on the fields they want. This is perhaps a design choice that makes sense when you're building an API to perform the range of operations that the YouTube API allows for, but it can be a pain if you just want to get some data and move along.&lt;/p&gt;
&lt;p&gt;You might expect there was an endpoint to query all the videos for a given channel, and let you specify which fields you want for the videos, but unfortunately there isn't (afaik). That's where ytdata can help. You can use it in Python or as a standalone CLI tool. Check it out on &lt;a href="https://github.com/danlou/ytdata"&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Python Example&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;ytdata&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;YTData&lt;/span&gt;

&lt;span class="n"&gt;cnn_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;YTData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;channel_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;UCupvZG-5ko_eiXAupbDfxWw&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;videoId&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;description&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                          &lt;span class="s1"&gt;&amp;#39;viewCount&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;duration&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;publishedAt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                  &lt;span class="n"&gt;max_results&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;verbose&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cnn_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# peek, nothing&amp;#39;s nested&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Most recent videos:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cnn_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;  &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;. &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;

&lt;span class="c1"&gt;# store&lt;/span&gt;
&lt;span class="n"&gt;cnn_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dump&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cnn.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Setup and CLI Demonstration&lt;/h3&gt;
&lt;p&gt;&lt;a href=""&gt;&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/RAT3J-tBb10" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Installation notes&lt;/h3&gt;
&lt;p&gt;ytdata is available as a pip package and can be installed with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install ytdata
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It expects a valid Google API Key stored in an environment variable called GOOGLE_API_KEY.
If you don't already have one, you can follow these &lt;a href="https://developers.google.com/youtube/registering_an_application#Create_API_Keys"&gt;instructions&lt;/a&gt; (you'll want a server key).&lt;/p&gt;
&lt;p&gt;After you get your key, you can add the environment variable by opening your ~/.bashrc (or ~/.zshrc, if you're on zsh) on your editor of choice and append the following line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GOOGLE_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;Your_Private_Key&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;How to find the channel id ?&lt;/h3&gt;
&lt;p&gt;The simplest way to find the channel id is to visit the YouTube page for a video belonging to the channel of interest and extract the id from the page's meta tags. Just open the console on your browser and enter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;meta[itemprop=&amp;quot;channelId&amp;quot;]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;content&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Supported Fields&lt;/h3&gt;
&lt;p&gt;You can check the supported fields at &lt;a href=""&gt;https://github.com/danlou/ytdata#supported-fields&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Questions ?&lt;/h3&gt;
&lt;p&gt;Reach me on &lt;a href="https://twitter.com/danielbloureiro"&gt;Twitter&lt;/a&gt; or create an &lt;a href="https://github.com/danlou/ytdata/issues"&gt;issue&lt;/a&gt; on GH.&lt;/p&gt;</content><category term="python"></category><category term="youtube"></category><category term="data mining"></category></entry></feed>